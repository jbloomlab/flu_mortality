<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@5.2.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "axis": {"grid": false}}, "data": {"name": "data-76c245cc73fdf2c0e6fd7c85c7583d7d"}, "facet": {"field": "subtype", "header": {"labelFontSize": 13, "labelPadding": 0}, "title": null, "type": "nominal"}, "spec": {"layer": [{"mark": {"type": "point", "filled": true, "opacity": 1, "size": 50}, "encoding": {"color": {"field": "age group", "scale": {"domain": ["all ages", "<65 years", "65+ years"], "range": ["#000000", "#E69F00", "#56B4E9"]}, "type": "nominal"}, "tooltip": [{"field": "year", "type": "temporal"}, {"field": "subtype", "type": "nominal"}, {"field": "age group", "type": "nominal"}, {"field": "mortality", "type": "quantitative"}], "x": {"field": "year", "type": "temporal"}, "y": {"field": "mortality", "title": "excess mortality per 100,000", "type": "quantitative"}}, "params": [{"name": "parameter001", "select": {"type": "point", "fields": ["age group"]}, "bind": "legend", "value": [{"age group": "all ages"}]}]}, {"mark": {"type": "line", "opacity": 1, "size": 1, "strokeDash": [2, 2]}, "encoding": {"color": {"field": "age group", "scale": {"domain": ["all ages", "<65 years", "65+ years"], "range": ["#000000", "#E69F00", "#56B4E9"]}, "type": "nominal"}, "tooltip": [{"field": "year", "type": "temporal"}, {"field": "subtype", "type": "nominal"}, {"field": "age group", "type": "nominal"}, {"field": "mortality", "type": "quantitative"}], "x": {"field": "year", "type": "temporal"}, "y": {"field": "mortality", "title": "excess mortality per 100,000", "type": "quantitative"}}}], "height": 140, "width": 500}, "columns": 1, "resolve": {"scale": {"x": "independent", "y": "independent"}}, "spacing": 12, "title": {"text": ["Influenza & pneumonia excess mortality in the United States, taken from Simonson et al, JID, (1998).", "The H1N1 pandemic occurred in 1918, and the H3N2 pandemic occurred in 1968.", "Click / shift-click on the legend to show data for specific age groups."], "dy": 8, "fontSize": 12, "fontWeight": "normal", "orient": "bottom"}, "transform": [{"filter": {"param": "parameter001"}}], "$schema": "https://vega.github.io/schema/vega-lite/v5.2.0.json", "datasets": {"data-76c245cc73fdf2c0e6fd7c85c7583d7d": [{"year": "1918-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 529.0}, {"year": "1919-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 93.0}, {"year": "1921-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 16.0}, {"year": "1922-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 37.0}, {"year": "1925-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 26.0}, {"year": "1928-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 84.0}, {"year": "1936-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 18.0}, {"year": "1943-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "all ages", "mortality": 14.0}, {"year": "1968-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 8.1}, {"year": "1969-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.3}, {"year": "1970-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 0.7}, {"year": "1971-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 4.2}, {"year": "1972-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.8}, {"year": "1974-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.0}, {"year": "1975-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 5.5}, {"year": "1977-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.8}, {"year": "1980-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 5.2}, {"year": "1982-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 2.0}, {"year": "1984-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.4}, {"year": "1987-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.1}, {"year": "1989-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 4.1}, {"year": "1991-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 2.6}, {"year": "1992-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 2.4}, {"year": "1993-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 3.9}, {"year": "1994-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "all ages", "mortality": 2.0}, {"year": "1918-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 166.0}, {"year": "1919-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 175.0}, {"year": "1921-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 93.0}, {"year": "1922-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 280.0}, {"year": "1925-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 221.0}, {"year": "1928-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 594.0}, {"year": "1936-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 101.0}, {"year": "1943-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "65+ years", "mortality": 123.0}, {"year": "1968-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 44.0}, {"year": "1969-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 16.0}, {"year": "1970-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 2.8}, {"year": "1971-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 29.0}, {"year": "1972-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 21.0}, {"year": "1974-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 19.0}, {"year": "1975-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 42.0}, {"year": "1977-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 30.0}, {"year": "1980-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 41.0}, {"year": "1982-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 19.0}, {"year": "1984-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 29.0}, {"year": "1987-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 24.0}, {"year": "1989-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 30.0}, {"year": "1991-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 19.0}, {"year": "1992-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 16.0}, {"year": "1993-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 29.0}, {"year": "1994-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "65+ years", "mortality": 15.0}, {"year": "1918-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 546.0}, {"year": "1919-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 89.0}, {"year": "1921-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 12.0}, {"year": "1922-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 24.0}, {"year": "1925-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 15.0}, {"year": "1928-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 55.0}, {"year": "1936-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 12.0}, {"year": "1943-01-01T00:00:00", "subtype": "H1N1 influenza", "age group": "<65 years", "mortality": 4.8}, {"year": "1968-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 4.3}, {"year": "1969-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 1.9}, {"year": "1970-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.4}, {"year": "1971-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 1.5}, {"year": "1972-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 1.4}, {"year": "1974-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.8}, {"year": "1975-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.8}, {"year": "1977-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.6}, {"year": "1980-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.6}, {"year": "1982-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.0}, {"year": "1984-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.1}, {"year": "1987-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.1}, {"year": "1989-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.3}, {"year": "1991-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.2}, {"year": "1992-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.2}, {"year": "1993-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.3}, {"year": "1994-01-01T00:00:00", "subtype": "H3N2 influenza", "age group": "<65 years", "mortality": 0.1}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>